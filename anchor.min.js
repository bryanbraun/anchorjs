!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():(t.AnchorJS=e(),t.anchors=new t.AnchorJS)}(this,function(){"use strict";return function(t){function e(t){t.icon=t.hasOwnProperty("icon")?t.icon:"",t.visible=t.hasOwnProperty("visible")?t.visible:"hover",t.placement=t.hasOwnProperty("placement")?t.placement:"right",t.ariaLabel=t.hasOwnProperty("ariaLabel")?t.ariaLabel:"Anchor",t.class=t.hasOwnProperty("class")?t.class:"",t.truncate=t.hasOwnProperty("truncate")?Math.floor(t.truncate):64}function i(t){var e;if("string"==typeof t||t instanceof String)e=[].slice.call(document.querySelectorAll(t));else{if(!(Array.isArray(t)||t instanceof NodeList))throw new Error("The selector provided to AnchorJS was invalid.");e=[].slice.call(t)}return e}this.options=t||{},this.elements=[],e(this.options),this.isTouchDevice=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},this.add=function(t){var n,s,o,r,a,l,c,h,u,d,f,p=[];if(e(this.options),"touch"===(f=this.options.visible)&&(f=this.isTouchDevice()?"always":"hover"),t||(t="h2, h3, h4, h5, h6"),0===(n=i(t)).length)return this;for(document.documentElement.classList.add("anchorjs"),s=document.querySelectorAll("[id]"),o=[].map.call(s,function(t){return t.id}),a=0;a<n.length;a++)if(this.hasAnchorJSLink(n[a]))p.push(a);else{if(n[a].hasAttribute("id"))r=n[a].getAttribute("id");else if(n[a].hasAttribute("data-anchor-id"))r=n[a].getAttribute("data-anchor-id");else{u=h=this.urlify(n[a].textContent),c=0;do{void 0!==l&&(u=h+"-"+c),l=o.indexOf(u),c+=1}while(-1!==l);l=void 0,o.push(u),n[a].setAttribute("id",u),r=u}r.replace(/-/g," "),(d=document.createElement("a")).className="anchorjs-link "+this.options.class,d.href="#"+r,d.setAttribute("aria-label",this.options.ariaLabel),d.setAttribute("data-anchorjs-icon",this.options.icon),"always"===f&&(d.style.opacity="1"),""===this.options.icon&&(d.style.font="1em/1 anchorjs-icons","left"===this.options.placement&&(d.style.lineHeight="inherit")),"left"===this.options.placement?(d.style.position="absolute",d.style.marginLeft="-1em",d.style.paddingRight="0.5em",n[a].insertBefore(d,n[a].firstChild)):(d.style.paddingLeft="0.375em",n[a].appendChild(d))}for(a=0;a<p.length;a++)n.splice(p[a]-a,1);return this.elements=this.elements.concat(n),this},this.remove=function(t){for(var e,n,s=i(t),o=0;o<s.length;o++)(n=s[o].querySelector(".anchorjs-link"))&&(-1!==(e=this.elements.indexOf(s[o]))&&this.elements.splice(e,1),s[o].removeChild(n));return this},this.removeAll=function(){this.remove(this.elements)},this.urlify=function(t){var i=/[& +$,:;=?@"#{}|^~[`%!'<>\]\.\/\(\)\*\\]/g;return this.options.truncate||e(this.options),t.trim().replace(/\'/gi,"").replace(i,"-").replace(/-{2,}/g,"-").substring(0,this.options.truncate).replace(/^-+|-+$/gm,"").toLowerCase()},this.hasAnchorJSLink=function(t){var e=t.firstChild&&(" "+t.firstChild.className+" ").indexOf(" anchorjs-link ")>-1,i=t.lastChild&&(" "+t.lastChild.className+" ").indexOf(" anchorjs-link ")>-1;return e||i||!1}}});